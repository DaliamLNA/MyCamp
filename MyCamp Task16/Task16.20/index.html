<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIST OF CARS</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Open+Sans:wght@300&display=swap"
        rel="stylesheet">
</head>

<script>
    "use strict";
    /*** REGION 1 - Global variables - V√πng khai b√°o bi·∫øn, h·∫±ng s·ªë, tham s·ªë TO√ÄN C·ª§C */
    // CAR_DB: m·∫£ng ch·ª©a danh s√°ch c√°c ƒë·ªëi t∆∞·ª£ng √¥ t√¥ (car)
    var gListCars = [
        {
            brand: "Ford", model: "Explorer", year: 2017, color: "white", carImg: "images/cars/ford_explorer_2017.png",
            vID: "AB-10111", owner: "Morris Mccoy", ownerAvatar: "images/owners/morris_mccoy.jpg"
        },
        {
            brand: "Toyota", model: "Corolla", year: 2018, color: "silver", carImg: "images/cars/toyota_corolla_2018.png",
            vID: "DN-23218", owner: "Claire Robertson", ownerAvatar: "images/owners/claire_robertson.jpg"
        },
        {
            brand: "Mazda", model: "Mazda 6", year: 2020, color: "red", carImg: "images/cars/mazda_2020_red.png",
            vID: "TZ-23212", owner: "Ted Hawkins", ownerAvatar: "images/owners/ted_hawkins.jpg"
        },
        {
            brand: "Toyota", model: "Fortuna", year: 2016, color: "black", carImg: "images/cars/toyota-fortuner_black.png",
            vID: "IN-91925", owner: "Juanita Bell", ownerAvatar: "images/owners/juanita_bell.jpg"
        },
        {
            brand: "Honda", model: "Civic", year: 2020, color: "black", carImg: "images/cars/honda_civic_2020.png",
            vID: "MN-44593", owner: "Clevaio Simon", ownerAvatar: "images/owners/clevaio_simon.jpg"
        }
    ];

    /*** REGION 2 - V√πng g√°n / th·ª±c thi h√†m x·ª≠ l√Ω s·ª± ki·ªán cho c√°c elements */

    /*** REGION 3 - Event handlers - V√πng khai b√°o c√°c h√†m x·ª≠ l√Ω s·ª± ki·ªán */
    function onPageLoading() {
        // Code ƒë·ªÉ ch·∫°y th·ª≠ test h√†m getCarByIndex()
        var vCarA = getCarByIndex(1); // h√†m n√†y tr·∫£ v·ªÅ m·ªôt ƒë·ªëi t∆∞·ª£ng
        console.log("Car found by getCarByIndex, index = " + 1);
        console.log(vCarA.brand);
        console.log(vCarA.model);
        console.log(vCarA.color);
        // ·∫®n v√πng not found
        var vNotFound = document.getElementById('div-not-found');
        vNotFound.style.display = "none";
        // Ch·∫°y h√†m load oto
        loadCarlist()
    }

    /*** REGION 4 - Common funtions - V√πng khai b√°o h√†m d√πng chung trong to√†n b·ªô ch∆∞∆°ng tr√¨nh */
    /* ƒë√¢y l√† 01 function ƒë√£ tr·∫£ l·∫°i object car b·ªüi index.
     b·∫°n h√£y tham kh·∫£o c√°ch tr·∫£ l·∫°i khi t√¨m th·∫•y v√† kh√¥ng t√¨m th·∫•y */
    function getCarByIndex(paramIndexOfCar) {
        //if the input index not in the invalid range (index ƒë∆∞a v√†o kh√¥ng c√≥ trong array gCAR_DB)
        if (paramIndexOfCar < 0 || paramIndexOfCar > gListCars.length - 1) {
            return null; // null l√† ƒë·ªëi t∆∞·ª£ng r·ªóng
        }
        // n·∫øu c√≥ th√¨ return object ·ªü v·ªã tr√≠ ƒë√≥
        return gListCars[paramIndexOfCar];
    }

    /* b·∫°n h√£y vi·∫øt function tr·∫£ l·∫°i car object d·ª±a v√†o VID
     g·ª£i √Ω t√¨m ki·∫øm "while loop javascript" */
    function getCarByVId(paramCarVId) {
        // G√°n c√°c gi√° tr·ªã ban ƒë·∫ßu
        var vCarObj = null;
        var vCarIndex = 0;
        var vCarFound = false;
        // khi ch∆∞a t√¨m th·∫•y oto v√†  ch∆∞a t√¨m th·∫•y k·∫øt qu·∫£ th√¨ t√¨m ti·∫øp d√πng v√≤ng while
        while (vCarFound == false && vCarIndex < gListCars.length) {
            if (gListCars[vCarIndex].vID == paramCarVId) {
                vCarFound = true;
                vCarObj = gListCars[vCarIndex];
            }
            else {
                vCarIndex++;
            }
        }
        return vCarObj;
    }
    // Car Finding ########################
    function onBtnClickSearch() {
        // truy xu·∫•t ph·∫ßn t·ª≠
        var vCarFound = null;
        var vCarvIDInput = document.getElementById("input-vid");
        var vCarvIDValue = vCarvIDInput.value.trim();
        // n·∫øu kh√¥ng nh·∫≠p
        if (vCarvIDValue == "") {
            alert("B·∫°n c·∫ßn nh·∫≠p bi·ªÉn s·ªë")
        }
        else {
            // C√≥ nh·∫≠p m·ªõi t√¨m 
            var vCarFound = getCarByVId(vCarvIDValue);
            if (vCarFound != null) { // Kh√°c null l√† t√¨m th·∫•y
                // T√¨m th·∫•y
                var vDivListCar = document.getElementById("div-list-cars");
                // Lo·∫°i b·ªè c√°c xe c√≤n l·∫°i
                vDivListCar.innerHTML = "";
                // G√°n c√°c gi√° tr·ªã v√†o car t√¨m ƒë∆∞·ª£c
                vDivListCar = vDivListCar.innerHTML += `        <div class="car">
            <div class="left-content">
                <img src="${vCarFound.carImg}" alt="img">
            </div>
            <div class="right-content">
                <div class="right__header">
                    <div class="right__brand">${vCarFound.brand}</div>
                    <div class="right__model">${vCarFound.model}</div>
                    <div class="right__vid">${vCarFound.vID}</div>
                </div>
                <div class="right__title">
                  ${vCarFound.brand + ` - ` + vCarFound.model + ` - ` + vCarFound.year + ` - ` + vCarFound.color}
                </div>
                <div class="right__footer">
                    <div class="footer__owner">
                        <div class="avatar">
                            <img src="${vCarFound.ownerAvatar}" alt="">
                        </div>
                        <div class="owner-name">${vCarFound.owner}</div>
                    </div>
                    <div class="footer__readmore">
                        View detail ü°¢
                    </div>
                </div>
            </div>
        </div>`

            }
            else { // Ko t√¨m th·∫•y
                var vDivListCar = document.getElementById("div-list-cars");
                vDivListCar.innerHTML = "";
                var vNotFound = document.getElementById('div-not-found');
                vNotFound.style.display = "block";
            }
        }
    }

    // Reveal car list
    function loadCarlist() {
        var vDivListCar = document.getElementById("div-list-cars");

        for (var bI = 1; bI < gListCars.length + 1; bI++) {
            vDivListCar.innerHTML += `        <div class="car">
            <div class="left-content">
                <img src="${gListCars[bI].carImg}" alt="img">
            </div>
            <div class="right-content">
                <div class="right__header">
                    <div class="right__brand">${gListCars[bI].brand}</div>
                    <div class="right__model">${gListCars[bI].model}</div>
                    <div class="right__vid">${gListCars[bI].vID}</div>
                </div>
                <div class="right__title">
                  ${gListCars[bI].brand + ` - ` + gListCars[bI].model + ` - ` + gListCars[bI].year + ` - ` + gListCars[bI].color}
                </div>
                <div class="right__footer">
                    <div class="footer__owner">
                        <div class="avatar">
                            <img src="${gListCars[bI].ownerAvatar}" alt="">
                        </div>
                        <div class="owner-name">${gListCars[bI].owner}</div>
                    </div>
                    <div class="footer__readmore">
                        View detail ü°¢
                    </div>
                </div>
            </div>
        </div>`
        }
    }
</script>

<body onload="onPageLoading()">
    <div class="search-section">
        <div class="search__title">
            ·ª®NG D·ª§NG T√åM KI·∫æM √î T√î
        </div>
        <div class="search-box">
            <div class="search__label">Nh·∫≠p VID</div>
            <div class="search__input">
                <input type="text" placeholder="Nh·∫≠p bi·ªÉn s·ªë ..." id="input-vid">
            </div>
            <div class="search__button">
                <button onclick="onBtnClickSearch()">T√¨m ki·∫øm</button>
            </div>
        </div>
    </div>
    <div class="list-cars" id="div-list-cars">
        <div class="car">
            <div class="left-content">
                <img src="images/cars/ford_explorer_2017.png" alt="img">
            </div>
            <div class="right-content">
                <div class="right__header">
                    <div class="right__brand">FORD</div>
                    <div class="right__model">Explorer</div>
                    <div class="right__vid">AB-10111</div>
                </div>
                <div class="right__title">
                    Ford - Explorer - 2017 - White
                </div>
                <div class="right__footer">
                    <div class="footer__owner">
                           <div class="avatar">
                            <img src="images/owners/claire_robertson.jpg" alt="">
                        </div>
                        <div class="owner-name">Claire Robertson</div>
                    </div>
                    <div class="footer__readmore">
                        View detail ü°¢
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="not-found" id="div-not-found">
        <img src="images/not-found.png" width="15%" alt="">
        <div class="not-found__text">
            Kh√¥ng t√¨m th·∫•y √¥ t√¥ n√†o v·ªõi VID ƒë√£ nh·∫≠p
        </div>
    </div>
</body>

</html>